<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OUTA DOW - Media Saver</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Existing Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=PT+Sans+Narrow&display=swap" rel="stylesheet">
    <!-- New Fonts for Player -->
    <link href="https://fonts.googleapis.com/css2?family=Nunito:ital,wght@0,200..1000;1,200..1000&family=Permanent+Marker&display=swap" rel="stylesheet">
    
    <!-- Icons and Libraries -->
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"/>

    <style>
        /* Base and Background Styles */
        *, *::after, *::before { box-sizing: border-box; margin: 0; padding: 0; }
        html, body {
            height: 100%;
            overflow: hidden; /* Prevent body scroll */
        }
        body { font-family: 'Inter', sans-serif; background-color: #080a0f; }
        .bg { position: relative; display: flex; justify-content: center; width:100%; height:100%; background-color: black; background-image: url('https://20essentials.github.io/project-000-128/assets/n1.avif'); background-position: center; background-size: cover; overflow: hidden; transition: background-image 0.5s ease-in-out, background-color 0.5s ease-in-out; }
        .inner { mix-blend-mode: overlay; inset: 0; position: absolute; animation: moveInner 10s ease infinite alternate; }
        @keyframes moveInner {
            0% { background-color: #f0f; } 25% { background-color: #0f0; } 50% { background-color: #00f; } 75% { background-color: #f00; } 100% { background-color: #ff0; }
        }
        
        #page-container {
            width: 100%;
            height: 100%;
            display: flex;
            overflow-x: scroll;
            scroll-snap-type: x mandatory;
            scroll-behavior: smooth;
            -webkit-overflow-scrolling: touch; /* Momentum scrolling on iOS */
        }
        /* Hide scrollbar */
        #page-container::-webkit-scrollbar { display: none; }
        #page-container { -ms-overflow-style: none; scrollbar-width: none; }

        .page-content {
            width: 100vw;
            height: 100%;
            flex-shrink: 0;
            scroll-snap-align: start;
            position: relative;
            z-index: 10;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow-y: auto; 
            overflow-x: hidden; 
            padding: 1rem;
        }

        /* Unified Content Container Style */
        .content {
            width: 90%;
            max-width: 1200px;
            height: 90%;
            max-height: 800px;
            background: rgba(20, 20, 40, 0.4);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
            color: #e5e5e5;
            padding: 30px;
            display: flex;
            flex-direction: column;
            align-items: center;
            overflow-y: auto;
        }
        .content::-webkit-scrollbar { width: 7px; }
        .content::-webkit-scrollbar-track { background: transparent; }
        .content::-webkit-scrollbar-thumb { background-color: rgba(255,255,255,0.3); border-radius: 40px; }


        /* Toast Styles */
        .toast { animation: fade-in-out 3s forwards; }
        @keyframes fade-in-out { 0% { opacity: 0; transform: translateY(20px); } 10% { opacity: 1; transform: translateY(0); } 90% { opacity: 1; transform: translateY(0); } 100% { opacity: 0; transform: translateY(-20px); } }
        
        /* Navigation Styles */
        nav { background-color: rgba(26, 32, 48, 0.5); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); border: 1px solid #252e45; border-radius: 100px; display: flex; flex-wrap: wrap; position: fixed; bottom: 1rem; left: 50%; transform: translateX(-50%); z-index: 100; }
        nav a { border-radius: 100px; display: flex; align-items: center; justify-content: center; font-family: "ff-chambers-sans-web", sans-serif; font-weight: 500; text-decoration: none; position: relative; margin: 4px; padding: 12px; overflow: hidden; }
        nav a:hover .label { bottom: 2px; opacity: 1; }
        nav a .icon { font-size: 28px; color: #fff; display: flex; align-items: center; justify-content: center; z-index: 1; mix-blend-mode: exclusion; }
        nav a .label { color: #fff; position: absolute; bottom: -8px; font-family: "PT Sans Narrow", serif; font-size: 0.8rem; mix-blend-mode: exclusion; opacity: 0; z-index: 1; transition: bottom 200ms ease, opacity 200ms ease; text-transform: lowercase; }
        nav a svg { position: absolute; bottom: 0; left: 0; }
        nav a svg rect { shape-rendering: crispEdges; z-index: 0; }
        nav a svg .blue rect { fill: #05eafa; mix-blend-mode: color-dodge; }
        nav a svg .pink rect { fill: #f52cb9; }
        nav a.active .label { bottom: 2px; opacity: 1; }
        @media (max-width: 640px) { nav a { padding: 10px; margin: 3px; } }

        /* Player Specific Styles (inside .content) */
        #page-play {
            --light-clr: #e5e5e5; --primary-clr: #6490f6; --secondary-clr: #c1daff; --active-clr: rgba(149, 153, 186, 0.4); --player-bg: rgba(5, 9, 51, 0.4); --scrollbar-track: rgb(79, 78, 78); --scrollbar-thumb: rgb(116, 116, 116);
            font-family: "Nunito", sans-serif;
        }
         #page-play .content {
            background: transparent;
            backdrop-filter: none;
            -webkit-backdrop-filter: none;
            border: none;
            box-shadow: none;
            overflow: hidden;
        }
        #page-play *, #page-play *::before, #page-play *::after { box-sizing: border-box; padding: 0; margin: 0; }
        #page-play h1 { font-size: clamp(0.8rem, 3vw, 1rem); }
        #page-play p { font-size: clamp(0.7rem, 3vw, 1rem); }
        #page-play .slider-playlist { display: grid; grid-template-columns: 45% 55%; align-items: center; width: 100%; height: 100%;}
        #page-play .swiper { width: 300px; height: auto; }
        #page-play .swiper-slide { display: grid; grid-template-rows: auto 1fr; padding: 15px; border-radius: 10px; background-color: #d3d2d6; box-shadow: 0 0.5px 0 1px rgba(255, 255, 255, 0.2) inset, 0 1px 0 0 rgba(255, 255, 255, 0.6) inset, 0 4px 16px rgba(0, 0, 0, 0.1); user-select: none; }
        #page-play .swiper-slide img { display: block; user-select: none; width: 100%; height: auto; object-fit: cover; aspect-ratio: 1/1; border-radius: 5px; margin-bottom: 14px; pointer-events: none; }
        #page-play .swiper-slide h1 { width: max-content; font-family: "Permanent Marker", serif; letter-spacing: 2px; color: #222224; text-transform: uppercase; transform: rotate(-3deg); margin: auto; }
        #page-play .playlist { width: 100%; height: 100%; overflow-y: auto; padding-left: 20px;}
        #page-play .playlist-item { display: grid; grid-template-columns: 15% 65% 15% 5%; align-items: center; width: 100%; height: auto; padding: 8px 10px; margin-bottom: 15px; border-bottom: 2px solid var(--primary-clr); color: var(--light-clr); cursor: pointer; user-select: none; }
        #page-play .playlist-item img { display: block; user-select: none; width: 70%; height: auto; object-fit: cover; aspect-ratio: 1/1; border-radius: 5px; overflow: hidden; }
        #page-play .playlist-item .song p:nth-child(1) { font-weight: 500; margin-bottom: 3px; }
        #page-play .playlist-item .song p:nth-child(2) { font-weight: 300; opacity: 0.5; }
        #page-play .playlist-item i { font-size: 1.2rem; color: var(--light-clr); }
        #page-play .active-playlist-item { background-color: var(--active-clr); border-radius: 5px; }
        #page-play .player { position: sticky; left: 0; bottom: 0; width: 100%; border: 1px solid rgba(255, 255, 255, 0.3); border-radius: 10px; background: var(--player-bg); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); box-shadow: 2px 2px 10px 2px rgba(0, 0, 0, 0.25); display: flex; flex-direction: column; align-items: center; padding: 10px 0 5px; z-index: 15; margin-top: auto;}
        #page-play .controls { display: flex; justify-content: center; align-items: center; column-gap: 25px; }
        #page-play .controls i { font-size: 1.7rem; cursor: pointer; transform: scale(1); will-change: transform; }
        #page-play #playPauseBtn { display: flex; align-items: center; justify-content: center; width: 45px; aspect-ratio: 1/1; margin: 5px 0; color: var(--primary-clr); outline: 0; background: var(--light-clr); border: 2px solid rgba(255, 255, 255, 0.3); border-radius: 50%; box-shadow: 0 10px 20px rgba(5, 36, 28, 0.3); font-size: 1.5rem; transform: scale(1); will-change: transform; }
        #page-play #shuffleBtn:hover, #page-play #prevBtn:hover, #page-play #nextBtn:hover, #page-play #playPauseBtn:hover { transform: scale(1.05); }
        #page-play .volume { position: relative; display: flex; align-items: center; }
        #page-play .volume i { color: var(--light-clr); font-size: 1.2rem; }
        #page-play #volume-range { position: absolute; left: 30px; top: 7px; appearance: none; -webkit-appearance: none; width: 120px; height: 4px; background: var(--primary-clr); border-radius: 4px; cursor: pointer; }
        #page-play #volume-range::-webkit-slider-thumb { appearance: none; -webkit-appearance: none; background: var(--light-clr); width: 12px; aspect-ratio: 1/1; border-radius: 50%; }
        #page-play #progress-bar { appearance: none; -webkit-appearance: none; width: 90%; height: 5px; background: linear-gradient( 90deg, var(--light-clr), var(--secondary-clr), var(--primary-clr), var(--secondary-clr), var(--light-clr) ); border-radius: 4px; margin: 12px 0 16px; cursor: pointer; }
        #page-play #progress-bar::-webkit-slider-thumb { appearance: none; -webkit-appearance: none; background: var(--light-clr); width: 15px; aspect-ratio: 1/1; border-radius: 50%; }
        
        @media (max-width: 1300px) { #page-play .swiper { width: 270px; } }
        @media (max-width: 1100px) { #page-play .content { padding: 40px 20px 20px; } #page-play .swiper { width: 240px; } #page-play .slider-playlist { grid-template-columns: 50% 50%; } }
        @media (max-width: 900px) { #page-play .content { padding: 30px 40px 20px; } #page-play .slider-playlist { grid-template-columns: 100%; grid-template-rows: auto 1fr auto; } #page-play .swiper { margin: 0 auto 30px; } #page-play .player { width: 100%; position:relative; } #page-play #volume-range { width: 50px; } }
        @media (max-width: 580px) { #page-play .content { overflow-x: hidden; } #page-play .swiper { width: 220px; margin: 0 auto 20px; } #page-play .playlist-item { margin-bottom: 10px; } #page-play .player { width: 100%; } #page-play .controls { column-gap: 15px; } #page-play .controls i { font-size: 1.3rem; } #page-play #playPauseBtn { width: 40px; font-size: 1.2rem; } #page-play .volume i { font-size: 0.9rem; } #page-play #volume-range { left: 20px; top: 6px; width: 40px; } }

    </style>
</head>
<body class="bg-gray-900 text-white antialiased">
    <main class="bg">
        <aside class="inner"></aside>
        <div id="toast-container" class="fixed bottom-20 right-5 z-50"></div>
        
        <div id="page-container">
            <!-- Home Page -->
            <div id="page-home" class="page-content">
                <div class="w-full max-w-2xl flex flex-col items-center">
                     <header class="mb-8 w-full text-center flex-shrink-0">
                        <div class="flex items-center justify-center gap-3">
                            <h1 class="text-5xl sm:text-6xl md:text-7xl font-black tracking-tighter text-white" style="text-shadow: 2px 2px 8px rgba(0,0,0,0.7);">OUTA</h1>
                            <span class="bg-[#f52cb9] text-white text-xs font-bold px-3 py-1 rounded-full -translate-y-3">DOW</span>
                        </div>
                        <p class="text-lg text-gray-200 mt-2">Download videos and playlists from YouTube as music.</p>
                    </header>
                    <div class="content w-full flex-grow" style="height:auto;max-height:60vh;justify-content:flex-start;">
                        <div class="w-full">
                            <div class="relative z-10 flex flex-col sm:flex-row gap-4">
                                <input type="url" id="url-input" placeholder="Enter a YouTube video or playlist URL..." class="flex-grow bg-black/40 text-white placeholder-gray-300 border-2 border-transparent focus:border-[#f52cb9] rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-[#f52cb9] transition duration-200 w-full">
                                <button id="save-button" class="bg-[#f52cb9] hover:bg-[#d4249b] text-white font-semibold rounded-lg px-6 py-3 transition duration-200 shadow-[0_0_15px_rgba(245,44,185,0.5)] hover:shadow-[0_0_25px_rgba(245,44,185,0.8)] w-full sm:w-auto">Install</button>
                            </div>
                            <p class="relative z-10 text-xs text-gray-300 mt-3 text-center sm:text-left">Only YouTube links are supported.</p>
                        </div>
                        <main id="links-container" class="w-full mt-10 grid grid-cols-1 gap-4 overflow-y-auto self-stretch"></main>
                    </div>
                </div>
            </div>

            <!-- Play Page -->
            <div id="page-play" class="page-content">
                 <div class="content">
                    <div class="slider-playlist">
                        <div class="swiper">
                            <div class="swiper-wrapper">
                                <div class="swiper-slide">
                                    <img src="https://github.com/user-attachments/assets/d80e6b68-b67a-4e27-86ee-e00581883d5c" />
                                    <h1>Syn Cole</h1>
                                </div>
                                <div class="swiper-slide">
                                    <img src="https://github.com/user-attachments/assets/9240f7ff-1b8e-4e62-a2d1-df78b285c7e0" />
                                    <h1>Clarx & Harddope</h1>
                                </div>
                                <div class="swiper-slide">
                                    <img src="https://github.com/user-attachments/assets/6e5ba953-49c5-4634-a1c5-4caf310cba86" />
                                    <h1>Neffex</h1>
                                </div>
                                <div class="swiper-slide">
                                    <img src="https://github.com/user-attachments/assets/a2ca0dfd-e53f-4e79-b8b0-288847e59b9a" />
                                    <h1>Patrick Patrikios</h1>
                                </div>
                                <div class="swiper-slide">
                                    <img src="https://github.com/user-attachments/assets/b286d7ff-52a1-452d-9cd9-5920c937b16e" />
                                    <h1>Besomorph & Coopex</h1>
                                </div>
                            </div>
                        </div>
                        <div class="playlist">
                            <div class="playlist-item">
                                <img src="https://github.com/user-attachments/assets/d80e6b68-b67a-4e27-86ee-e00581883d5c" alt="" />
                                <div class="song"> <p>Syn Cole</p> <p>Feel Good</p> </div>
                                <p>3:01</p> <i class="fa-regular fa-heart like-btn"></i>
                            </div>
                            <div class="playlist-item">
                                <img src="https://github.com/user-attachments/assets/9240f7ff-1b8e-4e62-a2d1-df78b285c7e0" alt="" />
                                <div class="song"> <p>Clarx & Harddope</p> <p>Castle</p> </div>
                                <p>2:38</p> <i class="fa-regular fa-heart like-btn"></i>
                            </div>
                            <div class="playlist-item">
                                <img src="https://github.com/user-attachments/assets/6e5ba953-49c5-4634-a1c5-4caf310cba86" alt="" />
                                <div class="song"> <p>Neffex</p> <p>Play Dead</p> </div>
                                <p>3:31</p> <i class="fa-regular fa-heart like-btn"></i>
                            </div>
                            <div class="playlist-item">
                                <img src="https://github.com/user-attachments/assets/a2ca0dfd-e53f-4e79-b8b0-288847e59b9a" alt="" />
                                <div class="song"> <p>Patrick Patrikios</p> <p>Know Myself</p> </div>
                                <p>3:23</p> <i class="fa-solid fa-heart like-btn"></i>
                            </div>
                            <div class="playlist-item">
                                <img src="https://github.com/user-attachments/assets/b286d7ff-52a1-452d-9cd9-5920c937b16e" alt="" />
                                <div class="song"> <p>Besomorph & Coopex</p> <p>Redemption</p> </div>
                                <p>2:37</p> <i class="fa-regular fa-heart like-btn"></i>
                            </div>
                        </div>
                    </div>
                    <div class="player">
                        <audio id="audioPlayer" src="https://github.com/ecemgo/mini-samples-great-tricks/raw/main/song-list/PlayDead-NEFFEX.mp3" type="audio/mpeg"></audio>
                        <div class="controls">
                            <i class="fa-solid fa-shuffle" id="shuffleBtn"></i>
                            <i class="fa-solid fa-backward" id="prevBtn"></i>
                            <button id="playPauseBtn"> <i class="fa-solid fa-play" id="playPauseIcon"></i> </button>
                            <i class="fa-solid fa-forward" id="nextBtn"></i>
                            <div class="volume">
                                <i class="fa-solid fa-volume-high"></i>
                                <input type="range" id="volume-range" min="0" max="100" value="100" />
                            </div>
                        </div>
                        <input type="range" value="0" id="progress-bar" />
                    </div>
                </div>
            </div>

            <!-- About Page -->
            <div id="page-about" class="page-content">
                 <div class="content">
                    <div id="user-profile-container" class="w-full h-full flex items-center justify-center">
                        <!-- User profile / Sign-in button will be injected here by JavaScript -->
                    </div>
                 </div>
            </div>
        </div>
    </main>

    <!-- Navigation Bar -->
    <nav>
      <a href="#" data-page="home"><span class="label">Home</span> <i class="bx bx-home icon"></i><svg height="100%" width="100%"><g class="pink"><rect x="0" width="6" height="100" y="100%"/><rect x="6" width="6" height="100" y="100%"/><rect x="12" width="6" height="100" y="100%"/><rect x="18" width="6" height="100" y="100%"/><rect x="24" width="6" height="100" y="100%"/><rect x="30" width="6" height="100" y="100%"/><rect x="36" width="6" height="100" y="100%"/><rect x="42" width="6" height="100" y="100%"/><rect x="48" width="6" height="100" y="100%"/><rect x="54" width="6" height="100" y="100%"/><rect x="60" width="6" height="100" y="100%"/><rect x="66" width="6" height="100" y="100%"/><rect x="72" width="6" height="100" y="100%"/><rect x="78" width="6" height="100" y="100%"/><rect x="84" width="6" height="100" y="100%"/><rect x="90" width="6" height="100" y="100%"/></g><g class="blue"><rect x="0" width="6" height="100" y="100%"/><rect x="6" width="6" height="100" y="100%"/><rect x="12" width="6" height="100" y="100%"/><rect x="18" width="6" height="100" y="100%"/><rect x="24" width="6" height="100" y="100%"/><rect x="30" width="6" height="100" y="100%"/><rect x="36" width="6" height="100" y="100%"/><rect x="42" width="6" height="100" y="100%"/><rect x="48" width="6" height="100" y="100%"/><rect x="54" width="6" height="100" y="100%"/><rect x="60" width="6" height="100" y="100%"/><rect x="66" width="6" height="100" y="100%"/><rect x="72" width="6" height="100" y="100%"/><rect x="78" width="6" height="100" y="100%"/><rect x="84" width="6" height="100" y="100%"/><rect x="90" width="6" height="100" y="100%"/></g></svg></a>
      <a href="#" data-page="play"><span class="label">Play</span> <i class="bx bx-play-circle icon"></i><svg height="100%" width="100%"><g class="pink"><rect x="0" width="6" height="100" y="100%"/><rect x="6" width="6" height="100" y="100%"/><rect x="12" width="6" height="100" y="100%"/><rect x="18" width="6" height="100" y="100%"/><rect x="24" width="6" height="100" y="100%"/><rect x="30" width="6" height="100" y="100%"/><rect x="36" width="6" height="100" y="100%"/><rect x="42" width="6" height="100" y="100%"/><rect x="48" width="6" height="100" y="100%"/><rect x="54" width="6" height="100" y="100%"/><rect x="60" width="6" height="100" y="100%"/><rect x="66" width="6" height="100" y="100%"/><rect x="72" width="6" height="100" y="100%"/><rect x="78" width="6" height="100" y="100%"/><rect x="84" width="6" height="100" y="100%"/><rect x="90" width="6" height="100" y="100%"/></g><g class="blue"><rect x="0" width="6" height="100" y="100%"/><rect x="6" width="6" height="100" y="100%"/><rect x="12" width="6" height="100" y="100%"/><rect x="18" width="6" height="100" y="100%"/><rect x="24" width="6" height="100" y="100%"/><rect x="30" width="6" height="100" y="100%"/><rect x="36" width="6" height="100" y="100%"/><rect x="42" width="6" height="100" y="100%"/><rect x="48" width="6" height="100" y="100%"/><rect x="54" width="6" height="100" y="100%"/><rect x="60" width="6" height="100" y="100%"/><rect x="66" width="6" height="100" y="100%"/><rect x="72" width="6" height="100" y="100%"/><rect x="78" width="6" height="100" y="100%"/><rect x="84" width="6" height="100" y="100%"/><rect x="90" width="6" height="100" y="100%"/></g></svg></a>
      <a href="#" data-page="about"><span class="label">About</span> <i class="bx bx-user-circle icon"></i><svg height="100%" width="100%"><g class="pink"><rect x="0" width="6" height="100" y="100%"/><rect x="6" width="6" height="100" y="100%"/><rect x="12" width="6" height="100" y="100%"/><rect x="18" width="6" height="100" y="100%"/><rect x="24" width="6" height="100" y="100%"/><rect x="30" width="6" height="100" y="100%"/><rect x="36" width="6" height="100" y="100%"/><rect x="42" width="6" height="100" y="100%"/><rect x="48" width="6" height="100" y="100%"/><rect x="54" width="6" height="100" y="100%"/><rect x="60" width="6" height="100" y="100%"/><rect x="66" width="6" height="100" y="100%"/><rect x="72" width="6" height="100" y="100%"/><rect x="78" width="6" height="100" y="100%"/><rect x="84" width="6" height="100" y="100%"/><rect x="90" width="6" height="100" y="100%"/></g><g class="blue"><rect x="0" width="6" height="100" y="100%"/><rect x="6" width="6" height="100" y="100%"/><rect x="12" width="6" height="100" y="100%"/><rect x="18" width="6" height="100" y="100%"/><rect x="24" width="6" height="100" y="100%"/><rect x="30" width="6" height="100" y="100%"/><rect x="36" width="6" height="100" y="100%"/><rect x="42" width="6" height="100" y="100%"/><rect x="48" width="6" height="100" y="100%"/><rect x="54" width="6" height="100" y="100%"/><rect x="60" width="6" height="100" y="100%"/><rect x="66" width="6" height="100" y="100%"/><rect x="72" width="6" height="100" y="100%"/><rect x="78" width="6" height="100" y="100%"/><rect x="84" width="6" height="100" y="100%"/><rect x="90" width="6" height="100" y="100%"/></g></svg></a>
    </nav>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/EasePack.min.js"></script>
    <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>

    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-app.js";
        import { getAuth, GoogleAuthProvider, signInWithPopup, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-auth.js";
        
        // --- Firebase Configuration ---
        const firebaseConfig = {
            apiKey: "YOUR_API_KEY",
            authDomain: "YOUR_AUTH_DOMAIN",
            projectId: "YOUR_PROJECT_ID",
            storageBucket: "YOUR_STORAGE_BUCKET",
            messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
            appId: "YOUR_APP_ID"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const provider = new GoogleAuthProvider();

        // --- Global Elements & State ---
        const pageContainer = document.getElementById('page-container');
        const toastContainer = document.getElementById('toast-container');
        let playerSwiper = null;
        let isPlayerInitialized = false;
        let navEffect;
        let currentPageIndex = 0;
        const pageIds = ['home', 'play', 'about'];

        // --- Toast Notification Logic ---
        const showToast = (message, type = 'success') => {
            const toast = document.createElement('div');
            const bgColor = type === 'success' ? 'bg-green-500' : 'bg-red-500';
            toast.className = `toast ${bgColor} text-white font-semibold py-2 px-4 rounded-lg shadow-lg`;
            toast.textContent = message;
            toastContainer.appendChild(toast);
            setTimeout(() => toast.remove(), 3000);
        };

        // --- Home Page Logic ---
        function initializeHomePage() {
            const urlInput = document.getElementById('url-input');
            const saveButton = document.getElementById('save-button');
            const linksContainer = document.getElementById('links-container');

            const renderDownloads = () => {
                if (!linksContainer.hasChildNodes()) {
                    linksContainer.innerHTML = `<div class="no-downloads-placeholder text-center text-gray-300 py-10 rounded-lg border border-dashed border-gray-600">
                        <p class="text-lg font-semibold">No downloads yet.</p>
                        <p class="mt-1 text-gray-400">Paste a URL above to get started!</p>
                    </div>`;
                }
            };
            
            const addDownload = () => {
                const url = urlInput.value.trim();
                if (!url) { showToast('Please enter a URL.', 'error'); return; }
                try { new URL(url); } catch (_) { showToast('Please enter a valid URL.', 'error'); return; }
                if(linksContainer.querySelector('.no-downloads-placeholder')) {
                    linksContainer.innerHTML = '';
                }
                const downloadId = `download-${Date.now()}`;
                const card = document.createElement('div');
                card.className = 'download-item w-full rounded-lg p-4 border border-gray-700 shadow-lg';
                card.id = downloadId;
                card.innerHTML = `<div class="flex justify-between items-center mb-2"><p class="font-bold text-gray-100 truncate text-sm">Preparing download...</p><p id="${downloadId}-percent" class="text-sm font-semibold text-gray-300">0%</p></div><div class="w-full bg-black/30 rounded-full h-2.5"><div id="${downloadId}-fill" class="progress-bar-fill h-2.5 rounded-full" style="width: 0%"></div></div>`;
                linksContainer.prepend(card);
                urlInput.value = '';
                let progress = 0;
                const interval = setInterval(() => {
                    progress += Math.floor(Math.random() * 5) + 1;
                    if (progress > 100) progress = 100;
                    const fill = document.getElementById(`${downloadId}-fill`);
                    const percentText = document.getElementById(`${downloadId}-percent`);
                    if (fill && percentText) { fill.style.width = `${progress}%`; percentText.textContent = `${progress}%`; }
                    if (progress === 100) { clearInterval(interval); if(percentText) percentText.textContent = 'Completed'; card.querySelector('p').textContent = 'Download Finished'; }
                }, 200);
            };
            
            saveButton.addEventListener('click', addDownload);
            urlInput.addEventListener('keypress', (e) => { if (e.key === 'Enter') addDownload(); });
            renderDownloads();
        }

        // --- Music Player Logic ---
        function initializeMusicPlayer() {
            if (isPlayerInitialized) return;

            const playlistItems = document.querySelectorAll("#page-play .playlist-item");
            const likeBtns = document.querySelectorAll("#page-play .like-btn");
            const audioPlayer = document.getElementById("audioPlayer");
            const volumeRange = document.getElementById("volume-range");
            const progressBar = document.getElementById("progress-bar");
            const playPauseBtn = document.getElementById("playPauseBtn");
            const playPauseIcon = document.getElementById("playPauseIcon");
            const prevBtn = document.getElementById("prevBtn");
            const nextBtn = document.getElementById("nextBtn");
            const shuffleBtn = document.getElementById("shuffleBtn");

            let currentSongIndex = 2;
            let isSongLoaded = false;
            const songs = [ "https://github.com/ecemgo/mini-samples-great-tricks/raw/main/song-list/SynCole-FeelGood.mp3", "https://github.com/ecemgo/mini-samples-great-tricks/raw/main/song-list/HarddopeClarx-Castle.mp3", "https://github.com/ecemgo/mini-samples-great-tricks/raw/main/song-list/PlayDead-NEFFEX.mp3", "https://github.com/ecemgo/mini-samples-great-tricks/raw/main/song-list/KnowMyself-PatrickPatrikios.mp3", "https://github.com/ecemgo/mini-samples-great-tricks/raw/main/song-list/BesomorphCoopex-Redemption.mp3", ];
            
            playerSwiper = new Swiper("#page-play .swiper", { effect: "cards", cardsEffect: { perSlideOffset: 9, perSlideRotate: 3 }, grabCursor: true, speed: 700, initialSlide: 2 });
            playerSwiper.on("slideChange", () => { const newIndex = playerSwiper.realIndex; if (newIndex !== currentSongIndex) { currentSongIndex = newIndex; loadAndPlaySong(currentSongIndex); } });
            
            const updateSwiperToMatchSong = (index) => { if (playerSwiper && playerSwiper.activeIndex !== index) { playerSwiper.slideTo(index); } };
            const updatePlaylistHighlight = (index) => { playlistItems.forEach((item, i) => { i === index ? item.classList.add("active-playlist-item") : item.classList.remove("active-playlist-item"); }); };
            const loadAndPlaySong = (index) => { audioPlayer.src = songs[index]; playSong(); updatePlaylistHighlight(index); updateSwiperToMatchSong(index); isSongLoaded = true; };
            const pauseSong = () => { audioPlayer.pause(); updatePlayPauseIcon(false); };
            const playSong = () => { const playPromise = audioPlayer.play(); if (playPromise !== undefined) { playPromise.then(_ => { updatePlayPauseIcon(true); }).catch(error => { if (error.name !== 'AbortError') { console.error('Playback failed:', error); updatePlayPauseIcon(false); } }); } };
            const togglePlayPause = () => { if (!isSongLoaded) { loadAndPlaySong(currentSongIndex); } else if (audioPlayer.paused) { playSong(); } else { pauseSong(); } };
            const updatePlayPauseIcon = (isPlaying) => { if (isPlaying) { playPauseIcon.classList.add("fa-pause"); playPauseIcon.classList.remove("fa-play"); } else { playPauseIcon.classList.add("fa-play"); playPauseIcon.classList.remove("fa-pause"); } };
            const nextSong = () => { currentSongIndex = (currentSongIndex + 1) % songs.length; loadAndPlaySong(currentSongIndex); };
            const prevSong = () => { currentSongIndex = (currentSongIndex - 1 + songs.length) % songs.length; loadAndPlaySong(currentSongIndex); };
            
            playlistItems.forEach((item, index) => { item.addEventListener("click", () => { currentSongIndex = index; loadAndPlaySong(index); }); });
            playPauseBtn.addEventListener("click", togglePlayPause);
            nextBtn.addEventListener("click", nextSong);
            prevBtn.addEventListener("click", prevSong);
            audioPlayer.addEventListener("loadedmetadata", () => { progressBar.max = audioPlayer.duration; progressBar.value = audioPlayer.currentTime; });
            audioPlayer.addEventListener("timeupdate", () => { if (!audioPlayer.paused) { progressBar.value = audioPlayer.currentTime; } });
            progressBar.addEventListener("input", () => { audioPlayer.currentTime = progressBar.value; });
            progressBar.addEventListener("change", () => { playSong(); });
            volumeRange.addEventListener("input", () => { audioPlayer.volume = volumeRange.value / 100; });
            audioPlayer.addEventListener("ended", nextSong);
            shuffleBtn.addEventListener("click", () => { const randomIndex = Math.floor(Math.random() * songs.length); currentSongIndex = randomIndex !== currentSongIndex ? randomIndex : (randomIndex + 1) % songs.length; loadAndPlaySong(currentSongIndex); });
            likeBtns.forEach((likeBtn) => { likeBtn.addEventListener("click", (e) => { e.stopPropagation(); likeBtn.classList.toggle("fa-regular"); likeBtn.classList.toggle("fa-solid"); }); });
            
            updatePlaylistHighlight(currentSongIndex);
            isPlayerInitialized = true;
        }

        // --- Firebase Authentication Logic ---
        const userProfileContainer = document.getElementById('user-profile-container');
        const signInWithGoogle = () => { signInWithPopup(auth, provider).then((result) => { showToast(`Welcome, ${result.user.displayName}!`); }).catch((error) => { console.error("Authentication failed:", error); showToast('Sign-in failed. Please try again.', 'error'); }); };
        const signOutUser = () => { signOut(auth).then(() => { showToast('You have been signed out.'); }).catch((error) => { console.error("Sign out failed:", error); }); };
        const updateProfileUI = (user) => {
            if (user) {
                userProfileContainer.innerHTML = `<div class="bg-transparent flex flex-col items-center"><img src="${user.photoURL}" alt="User Profile" class="w-24 h-24 rounded-full mb-4 border-4 border-[#f52cb9]"><h1 class="text-2xl font-bold">${user.displayName}</h1><p class="text-gray-400 mb-6">${user.email}</p><button id="sign-out-btn" class="bg-gray-600 hover:bg-gray-700 text-white font-semibold rounded-lg px-6 py-2 transition duration-200">Sign Out</button></div>`;
            } else {
                userProfileContainer.innerHTML = `<div class="bg-transparent"><h1 class="text-3xl font-bold mb-4">User Profile</h1><p class="text-gray-300 mb-6">Sign in to view your profile and sync your data.</p><button id="google-signin-btn" class="bg-[#f52cb9] hover:bg-[#d4249b] text-white font-semibold rounded-lg px-6 py-3 transition duration-200 shadow-[0_0_15px_rgba(245,44,185,0.5)] hover:shadow-[0_0_25px_rgba(245,44,185,0.8)] flex items-center justify-center mx-auto"><svg class="w-6 h-6 mr-3" viewBox="0 0 48 48"><path fill="#FFC107" d="M43.611 20.083H42V20H24v8h11.303c-1.649 4.657-6.08 8-11.303 8c-6.627 0-12-5.373-12-12s5.373-12 12-12c3.059 0 5.842 1.154 7.961 3.039l5.657-5.657C34.046 6.053 29.268 4 24 4C12.955 4 4 12.955 4 24s8.955 20 20 20s20-8.955 20-20c0-1.341-.138-2.65-.389-3.917z"></path><path fill="#FF3D00" d="M6.306 14.691l6.571 4.819C14.655 15.108 18.961 12 24 12c3.059 0 5.842 1.154 7.961 3.039l5.657-5.657C34.046 6.053 29.268 4 24 4C16.318 4 9.656 8.337 6.306 14.691z"></path><path fill="#4CAF50" d="M24 44c5.166 0 9.86-1.977 13.409-5.192l-6.19-5.238C29.211 35.091 26.715 36 24 36c-5.202 0-9.619-3.317-11.283-7.946l-6.522 5.025C9.505 39.556 16.227 44 24 44z"></path><path fill="#1976D2" d="M43.611 20.083H42V20H24v8h11.303c-.792 2.237-2.231 4.166-4.087 5.571l6.19 5.238C42.021 35.596 44 30.138 44 24c0-1.341-.138-2.65-.389-3.917z"></path></svg>Sign In with Google</button></div>`;
            }
        };

        // --- Navigation and Page Switching Logic ---
        const showPage = (pageId) => {
            const pageIndex = pageIds.indexOf(pageId);
            if (pageIndex !== -1) {
                const scrollX = pageIndex * window.innerWidth;
                pageContainer.scrollTo({ left: scrollX, behavior: 'smooth' });
                if (pageId === 'play') {
                    initializeMusicPlayer();
                }
                currentPageIndex = pageIndex;
            }
        };
        class NavigationEffect {
            constructor(navigation) { this.navigation = navigation; this.anchors = this.navigation.querySelectorAll("a"); this.anchors.forEach((anchor) => { anchor.addEventListener("click", (e) => { e.preventDefault(); const pageId = anchor.dataset.page; if(pageId) showPage(pageId); this.handlePrevious(); this.handleCurrent(anchor); }); }); }
            handleCurrent(current) { this.current = current; this.current.classList.add("active"); const nodes = this.getNodes(this.current); gsap.to(nodes[0], { duration: 1.8, ease: "elastic.out(1.4, 0.4)", yPercent: "-100", stagger: 0.008, overwrite: true }); gsap.to(nodes[1], { duration: 1.8, ease: "elastic.out(1.4, 0.4)", yPercent: "-100", stagger: 0.008, overwrite: true }); }
            handlePrevious() { this.previous = this.navigation.querySelector(".active"); if (this.previous) { this.previous.classList.remove("active"); const nodes = this.getNodes(this.previous); gsap.to(nodes[0], { duration: 0.2, ease: "power1.out", yPercent: "100", overwrite: true, stagger: 0.012 }); gsap.to(nodes[1], { duration: 0.2, ease: "power1.out", yPercent: "100", overwrite: true, delay: 0.02, stagger: 0.012 }); } }
            getNodes(item) { return [gsap.utils.shuffle(gsap.utils.selector(item)(".blue rect")), gsap.utils.shuffle(gsap.utils.selector(item)(".pink rect"))]; }
        }

        // --- Swipe Navigation ---
        let touchStartX = 0;
        let touchEndX = 0;
        function handleSwipeGesture() {
            const swipeThreshold = 150; // Increased swipe threshold
            if (touchEndX < touchStartX - swipeThreshold) {
                if (currentPageIndex < pageIds.length - 1) {
                    currentPageIndex++;
                    const nextPageId = pageIds[currentPageIndex];
                    showPage(nextPageId);
                    const navLink = document.querySelector(`nav a[data-page="${nextPageId}"]`);
                    if(navLink) {
                        navEffect.handlePrevious();
                        navEffect.handleCurrent(navLink);
                    }
                }
            }
            if (touchEndX > touchStartX + swipeThreshold) {
                if (currentPageIndex > 0) {
                    currentPageIndex--;
                    const prevPageId = pageIds[currentPageIndex];
                    showPage(prevPageId);
                    const navLink = document.querySelector(`nav a[data-page="${prevPageId}"]`);
                     if(navLink) {
                        navEffect.handlePrevious();
                        navEffect.handleCurrent(navLink);
                    }
                }
            }
        }
        pageContainer.addEventListener('touchstart', e => { touchStartX = e.changedTouches[0].screenX; }, { passive: true });
        pageContainer.addEventListener('touchend', e => { touchEndX = e.changedTouches[0].screenX; handleSwipeGesture(); });


        // --- Initial Load ---
        document.addEventListener('DOMContentLoaded', () => {
            gsap.registerPlugin(EasePack);
            navEffect = new NavigationEffect(document.querySelector("nav"));
            const homeLink = document.querySelector('a[data-page="home"]');
            if (homeLink) navEffect.handleCurrent(homeLink);
            
            initializeHomePage();

            onAuthStateChanged(auth, user => { updateProfileUI(user); });
            userProfileContainer.addEventListener('click', (e) => {
                if (e.target.closest('#google-signin-btn')) signInWithGoogle();
                if (e.target.closest('#sign-out-btn')) signOutUser();
            });
        });
    </script>
</body>
</html>
"

